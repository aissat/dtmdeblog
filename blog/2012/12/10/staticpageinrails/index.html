
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>من البداية - مدونة الطيب الضادي</title>
  <meta name="author" content="طيب مرابطي">

  
  <meta name="description" content="بعد غياب طويل نظرا لإنشغالاتي الكثيرة, أعود إليكم لمواصلة دروسنا الرايلزية. في هذا الدرس سوف نبدأ بمشروع جديد أحاول من خلاله شرح أهم ما يمكن معرفته &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tayeb83.github.com/dtmdeblog/blog/2012/12/10/staticpageinrails">
  <link href="/dtmdeblog/favicon.png" rel="icon">
  <link href="/dtmdeblog/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/dtmdeblog/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/dtmdeblog/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <style type="text/css">
    body {
      padding-bottom: 40px;
    }
    h1 {
      margin-bottom: 15px;
    }
    img {
      max-width: 100%;
    }
    .sharing, .meta, .pager {
      margin: 20px 0px 20px 0px;
    }
    .page-footer p {
      text-align: center;
    }
  </style>
  <script src="/dtmdeblog/javascripts/libs/jquery.js"></script>
  <script src="/dtmdeblog/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/dtmdeblog/javascripts/libs/bootstrap.js"></script>
  <script src="/dtmdeblog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/dtmdeblog/atom.xml" rel="alternate" title="مدونة الطيب الضادي" type="application/atom+xml">
  
  

</head>

<body    style="direction: rtl">
  <nav role="navigation"><div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

     

      <div class="nav-collapse">
         
        <ul class="nav pull-right">
  <li><a href="/dtmdeblog/blog/archives">الأرشيف</a></li>
  <li><a href="/dtmdeblog/">المدونة</a></li>
  <li><a href="/dtmdeblog/about">من أنا؟</a></li>
  <a href="/dtmdeblog/"><img src="/dtmdeblog/images/lowres.jpg"></a>

</ul>


        <ul class="nav pull-right" data-subscription="rss email">
          <li><a href="/dtmdeblog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
            <li><a href="tayeb.merabti@gmail.com" rel="subscribe-email" title="subscribe via email">Email</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="http://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:tayeb83.github.com/dtmdeblog" />
              <input class="search-query" type="text" name="q" results="0" placeholder="ابحث"/>
            </fieldset>
          </form>
        
      </div>
     
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      
<article class="hentry span9" role="article">

  
  <header class="page-header">
    
      <h1 class="entry-title">من البداية</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-10T23:09:00+01:00" pubdate data-updated="true">Dec 10<span>th</span>, 2012</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>بعد غياب طويل نظرا لإنشغالاتي الكثيرة, أعود إليكم لمواصلة دروسنا الرايلزية. في هذا الدرس سوف نبدأ بمشروع جديد أحاول من خلاله شرح أهم ما يمكن معرفته لإنجاح أول مشروع ب ROR.
رغم أن الهدف من  روبي رايلز هو تصميم مواقع و تطبيقات ويب ديناميكية فإن رايلز بارع في إنشاء صفحات ويب ساكنة. إستعمال ROR لتصميم مواقع ويب ساكنة له فوائد كثيرة بحيث أنه يمكننا إضافة و لو قليلا بعض الكود ديناميكي.
في البداية و كما أوضحناه في درس سابق نقوم بإنشاء أول مشروع رايلز نسميه testproject كالتالي :</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rails new testproject $</span></code></pre></td></tr></table></div></figure>


<p><img src="/dtmdeblog/images/StaticPagesRails/railsNewTestproject.png" title="إنشاء مشروع على رايلز"/></p>

<p>يمكن التنويه أنه في الإصدارات السابقة لرايلز كان لابد القيام بالأمر bundle install بعد إنشاء المشروع و لكن مع rails 3.2 أصبحت هذه الخطوة آلية عند المشروع, نُذكر أن الهدف من هذه الخطوة هو تثبيث الجيمات التي يحتاجها المشروع.</p>

<h2>  الصفحات الساكنة</h2>

<p>رايلز يقترح  طريقتين لإنشاء صفحات ويب ساكنة, الأولى بإستعمال صفحات ويب تحتوي على مجرد  الكود HTML, و الثانية, رايلز يتيح لنا تطوير واجهات (views) تحتوي على الHTML و التي يقوم رايلز بتحويلها إلى خادم الشبكة (web server).</p>

<h2>الصفحات الساكنة الفعلية</h2>

<p>لاحظتم أنه عند تشغيل مشروع رايلز للمرة الأولى ظهور صفحة بداية إفتراضية عند الذهاب إلى الرابط : http://localhost:3000
<img src="/dtmdeblog/images/StaticPagesRails/testprojectfirstpage.png" title=" صفحة البداية على رايلز"/></p>

<p>لمعرفة مصدر الصفحة يجب النظر إلى الملف public/index.html و الذي قام رايلز بإنشاءه بشكل إفتراضي, المهم أن رايلز يُرسل أي ملف في الpublic مباشرة على المتصفح, في حالة الملف
 الخاص index.html فإننا لن نحتاج لكتابة الإسم على الرابط لأن الإسم index.html يُعتبر ملف إفتراضي لصفحة البداية. إذن إذا فهمتم هذه الفقرة فإنه بإمكانكم الآن إنشاء صفحاتكم الخاصة ووضعها في الملف public, على سبيل المثال يمكننا إنشاء صفحة تحتوي على كلمة ترحيب.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gedit public/marhaba.html $</span></code></pre></td></tr></table></div></figure>


<p><img src="/dtmdeblog/images/StaticPagesRails/marhabaContent.png" title="marhaba.html محتوى"/></p>

<p><img src="/dtmdeblog/images/StaticPagesRails/marhabaPage.png" title=" إظهار الصفحة الترحيبية على السرفير"/></p>

<h2>الصفحات الساكنة الرايلزية </h2>

<p>القدرة على التعامل مع صفحات الHTML الساكنة ضروري ولكنه غير كافي بالدرجة الأولى خاصة من أجل إنشاء تطبيقات ديناميكية. في هذه الفقرة سوف نقوم بخطوة مهمة تسمح لنا بإنشاء صفحات ديناميكية و ذلك بإنشاء مانسميه مجموعة من &#8220;الأفعال&#8221; أو actions بحيث نستطيع من خلالهم تعريف الروابط بطريقة أقوى من الصفحات الساكنة. رايلز يتوفر على محرك يسمح بإنشاء وحدات التحكم &#8220;controller&#8221; إسمه &#8220;generate&#8221;, كل ما يلزمه لذلك هو إسم وحدة التحكم. في مثالنا سوف نقوم بإنشاء وحدة التحكم من أجل صفحاتنا الساكنة و التي سنسميها safahates. والتي سوف تحتوي على &#8220;الأفعال&#8221; التي سوف تمثل صفحاتنا الساكنة مثل صفحة &#8220;البداية&#8221;,&#8221;الإتصال&#8221; أو صفحة &#8220;من نحن&#8221;, و منه فإن السكريبت generate سوف يأخذ لائحة من الأفعال لإنشاء صفحاتنا.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rails generate controller Safahates contact home $</span></code></pre></td></tr></table></div></figure>


<p>مع إنشاء الفعلين home و contact فإن التوجيه نحو هاذين الفعلين قد تمت إضافته بطريقة آلية داخل الملف config/routes.rb.
<img src="/dtmdeblog/images/StaticPagesRails/railsGenerateController.png" title="generate تسلسل الملفات التي أنشأت عن بواسطة السكريبت "/></p>

<p>لو أليقنا نظرة على الملف config/routes.rb سنلاحظ مثلا وجود العلاقة &#8220;get safahates/home&#8221;, هذه العلاقة تتكفل بالأمر الموافق للرابط safahates/home لصفحة البداية, أكثر من ذلك, فإنه بإستعمالنا  لget فإن تطبيقنا يجيب على الأمر get و الذي هو عبارة عن واحد من الأفعال الأساسية للHTTP المستعملة من طرف HyperText Transfer Protocol. يمكنكم الآن مشاهدة النتيجة بإرسال اﻷمر rails server و تشغيل الرابط safahates/home. الآن لمعرفة منبع هذه الصفحات, يجب الذهاب إلى وحدة التحكم التي قمنا بإنشائها, سوف تلاحظون أن الملف safahates_controller يُعرف فئة تُسمى SahafatesController. الفئات هم عبارة عن طريقة سهلة و مرنة لترتيب الأفعال &#8220;الطرق&#8221; مثل الأفعال home  أو contact و التي تم تعريفها عن طريق الكلمة المفتاحية def, العلامة &#8220;>&#8221; تُشير إلى أن SahafatesController ترث من ApplicationController التي تعبر عن فئة رايلزية هذا يعني أن الفئة SahafatesController تحوي على الكثير من الميزات من رايلز. في روبي, هذه الأفعال لا تعني أي شيء بصفتها خالية, و لكن في رايلز الوضعية مختلفة : SahafatesController عبارة عن فئة روبية و لكن لكونها ترث من ApplicationController فإن سلوك هذه الأفعال ستكون خاصة برايلز, و لهذا عند تصفحنا الرابط safahates/home, يقوم رايلز بمراجعة وحدة التحكم safahates ثم بإرسال الأمر المقابل للفعل home ثم يرسل في الآخر الواجهة الموافقة. في المثال بماأن الفعل home خالي من أي أمر فإن كل الأوامر التي يتم إرسالها إلى safahates/home ترسل بدورها مجرد واجهات لا غير, و لكن أين هذه الواجهات ؟ الجواب موجود في الصورة السابقة التي تظهر نتيجة الأمر &#8220;rails generate Safahates contact home&#8221; و التي تظهر بكل وضوح الرابط  بين الواجهة ووحدة التحكم, فالفعل home يُقابله واجهة إسمها &#8220;home.html.erb&#8221; لاتحتوي على الكثير من الكود لإنها أُنشأت بطريقة إفتراضية.</p>

<p><img src="/dtmdeblog/images/StaticPagesRails/RouteFile.png" title="config/routes.rb الملف "/></p>

<p><img src="/dtmdeblog/images/StaticPagesRails/safahateHome.png" title="sahahates/home"/></p>

<h2> متغيرات الحالة و الروبي المتضمنن</h2>

<p>الملفات من نوع &#8220;erb.&#8221; يمكن أن تحتوي على الكود روبي, و الذي يمكننا إستعماله لجعل الصفحات أكثر ديناميكية. دعونا نجرب بعض الأمور السهلة بروبي داخل الصفحة  home مثل إضافة &#8220;1+1&#8221; و نلاحظ النتيجة في المتصفح. لإدماج الكود روبي داخل الhtml هناك طريقتين :</p>

<ul>
<li><p>عن طريق العلامات &lt;% %> لتنفيذ الكود روبي الموجود بين هاتين العلامتين ؛</p></li>
<li><p>عن طريق  &lt;% =%> لتنفيذ الكود روبي و إظهار النتيجة مباشرة على المتصفح, بحيث أن الفرق مع الطريقة الأولى يكمن في إظهار النتيجة.
<img src="/dtmdeblog/images/StaticPagesRails/rubyembeded.png" title="مثال عن الروبي المتضمنن"/></p></li>
</ul>


<p>أخر شيئ نتطرق له في هذا المقال هو مبدأ البرمجة من غير التكرار عن طريق الLayout. الملف application.html.erb الموجود فيapp/views/layout يعتبر من الملفات المهمة والتي تساعد بشكل كبير في تسريع البرمجة. الملف يحتوي على سطر في الظاهر بسيط ولكنه مفيد بدرجة كبيرة إنه :   &lt;% yield %> و الذي يسمح بإدخال أي واجهة, لهذا فإن الملف application.html.erb يستعمل بشكل كبير برسم الواجهة الأساسية لكل مشروع داخل رايلز, بحيث لو أن الصفحات داخل التطبيق تتقاسم بعض المحتوى فإن يمكن كتابتها مرة واحدة في هذا الLayout.</p>

<p><img src="/dtmdeblog/images/StaticPagesRails/applicationlayout.png" title="application.html.erb الملف"/></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">طيب مرابطي</span></span>

      








  


<time datetime="2012-12-10T23:09:00+01:00" pubdate data-updated="true">Dec 10<span>th</span>, 2012</time>
      

<span class="categories">
  
    <a class='category' href='/dtmdeblog/blog/categories/html/'>html</a>, <a class='category' href='/dtmdeblog/blog/categories/rails-/'>rails,</a>, <a class='category' href='/dtmdeblog/blog/categories/ruby-/'>ruby,</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://tayeb83.github.com/dtmdeblog/blog/2012/12/10/staticpageinrails/" data-via="dtmdeblog" data-counturl="http://tayeb83.github.com/dtmdeblog/blog/2012/12/10/staticpageinrails/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    
    <section>
      <h1>التعليقات</h1>
      <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
    </section>
    
    <ul class="pager">
      
      <li class="previous"><a class="basic-alignment left"
        href="/dtmdeblog/blog/2012/09/23/github/" title="Previous Post:
        إدارة الإصدارات-github">&laquo; إدارة الإصدارات-github</a></li>
      
      <li><a href="/dtmdeblog/blog/archives">أرشيف المدونات</a></li>
      
      <li class="next"><a class="basic-alignment right" href="/dtmdeblog/blog/2012/12/23/scaffolding-base/"
        title="Next Post: السقالة في روبي أون رايلز(scaffolding)">السقالة في روبي أون رايلز(scaffolding)
        &raquo;</a></li>
      
    </ul>
  </footer>
</article>

<aside class="sidebar-nav span3">
  
    <section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">أخر التدوينات</li>
    
      <li class="post">
        <a href="/dtmdeblog/blog/2013/05/21/regexp-ruby/">التعابير النمطية و روبي - الجزء الأول</a>
      </li>
    
      <li class="post">
        <a href="/dtmdeblog/blog/2013/05/08/intro-ruby/">مدخل إلى روبي</a>
      </li>
    
      <li class="post">
        <a href="/dtmdeblog/blog/2013/03/20/git-automcompletion/">التكملة التلقائية للgit </a>
      </li>
    
      <li class="post">
        <a href="/dtmdeblog/blog/2013/02/28/imporatenresourceforrails/">موارد مفيدة لكل مبرمجRails</a>
      </li>
    
      <li class="post">
        <a href="/dtmdeblog/blog/2013/02/22/git-and-github-vid3/">بالفيديو كيفية تقاسم المستودعات باستعمال الgithub</a>
      </li>
    
  </ul>
</section>


<section class="well">
  <ul id="tweets" class="nav">
    <li class="nav-header">أخر التغريدات</li>
    <li class="loading">تحديث ...</li>
  </ul>
  <script type="text/javascript">
    $(document).ready(function(){
      getTwitterFeed("dtmdeblog", 4, false);
    });
  </script>
  <script src="/dtmdeblog/javascripts/asides/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/dtmdeblog" class="twitter-follow-button" data-show-count="false">تابع @dtmdeblog</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/101099896157910648102?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  جميع الحقوق محفوظة &copy; 2013 - طيب مرابطي -
  <span class="credit">انجز باستعمال <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dtmdeblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://tayeb83.github.com/dtmdeblog/blog/2012/12/10/staticpageinrails/';
        var disqus_url = 'http://tayeb83.github.com/dtmdeblog/blog/2012/12/10/staticpageinrails/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
